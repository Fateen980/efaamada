var $,activeorder,DataTableLimit=100,isPaymentDisabled=$("#hfDisablePayment").val(),loginTypePayment="",payerTypePayment="",payerIDPayment="",isTrafficPayment=0;function DrowPopupBody(t,a,i,o=0){function n(t){LoadSVG("LoadSVG","Add"),LoadSVG("LoadSmallSVG","Add","LoadSmallSVGDiv","20px"),$(".SpanSelectedCount,.SelectedAmountSpan").html("0"),$(".PayListBtn").attr("disabled","disabled"),$(".NoFirmFound").remove(),GetTableData(t,a,o)}if(OpenPopup("animate__backInDown","animate__backInDown"),$(".CustomModalBodyCard").html('<div class="ViolationsList"></div><div class="ViolationDetails" style="display: none;"></div>'),$(".ViolationsList").append('<div class="mb-2 mt-1 pb-0 HomePopupDDLFilter" style="display:none"><div class="form-row"><div class="col-12 col-lg-10"><div class="row PopupFiltersDDL"></div></div><div class="form-group col-12 col-lg-2" style="display:none"><div class= "BtnSmallDiv PopupFiltersBtn" style="display:none"></div></div></div></div>'),0==o&&($(".PopupFiltersDDL").append('<div class="input-group mb-3 col-md-4" style="display:none"> <div class="input-group-prepend"> <span class="input-group-text" ><i class="fad fa-question"></i></span> </div> <select class="form-control selectpicker SelectType"> <option value="1" targetType="1">'+DictionaryUtils.getMessage("my_violations")+'</option><option class="firmOption" value="3" targetType="3">'+DictionaryUtils.getMessage("my_firms")+"</option> </select></div>"),$(".PopupFiltersDDL").append('<div class="input-group mb-3 col-md-5 TargetType TargetType3"> <div class="input-group-prepend"> <span class="input-group-text" ><i class="fad fa-landmark"></i></span> </div> <select class="form-control selectpicker DDLFirms">  </select> </div>')),$(".PopupFiltersDDL").append('<div class="input-group mb-3 col-md-4 " style="display:none"> <div class="input-group-prepend"> <span class="input-group-text" id="basic-addon1"><i class="fad fa-landmark"></i></span> </div> <select class="form-control selectpicker IsTrafficSelect FilterB"> <option value="1" >'+DictionaryUtils.getMessage("general_violations")+'</option> <option value="2">'+DictionaryUtils.getMessage("traffic_violations")+"</option> </select> </div>"),$(".PopupFiltersBtn").append('<span  class="form-control btn btn-primary BtnSmall SearchBtn"><i class="fad fa-search"></i></span>'),$(".PopupFiltersBtn").append('<span class="form-control btn btn-danger BtnSmall ResetBtn"><i class="fad fa-sync"></i></span>'),$(".SelectType").change(function(){var t=$(".SelectType option:selected").attr("targetType");0==t||1==t?($(".DDLLabours").val($(".DDLLabours option:first").val()),$(".DDLFirms").val($(".DDLFirms option:first").val())):2==t?$(".DDLFirms").val($(".DDLFirms option:first").val()):3==t&&$(".DDLLabours").val($(".DDLLabours option:first").val()),$(".TargetType").css("display","none"),$(".TargetType"+t).css("display","inline-flex")}),$(".DDLFirms,.SelectType").change(function(){$(".IsTrafficSelect").val($(".IsTrafficSelect option:first").val())}),$(".PopupFiltersDDL select").change(function(){$(".SearchBtn").click()}),$(".SearchBtn").click(function(){var a=$(".SelectType").val();a||(a=3);var i=$(".DDLFirms").val();(null==i||0==i||1==a)&&(i=t);var o=0;2==$(".IsTrafficSelect").val()&&(o=1);var l={violatorId:t,ViolatorType:a,Structre:0,Id:i,FineGroup:0,Status:1,FineDate:0,FineNumber:0,BusRef:0,IsTraffic:o},r=$(".SelectType option:selected").attr("targetType");0==i&&3==r?$(".form-row").append('<div class="col-12 NoFirmFound mb-2"><div class="alert alert-warning" role="alert">لا يوجد لديك منشآت</div></div>'):n(l)}),$(".ResetBtn").click(function(){$(".TargetType").css("display","none"),$(".SelectType").val($(".SelectType option:first").val()),$(".DDLFirms").val($(".DDLFirms option:first").val()),$(".IsTrafficSelect").val($(".IsTrafficSelect option:first").val());var a=$(".SelectType").val(),i=$(".DDLFirms").val();(null==i||0==i||1==a)&&(i=t);var o=0;2==$(".IsTrafficSelect").val()&&(o=1),n({violatorId:t,ViolatorType:a,Structre:0,Id:i,FineGroup:0,Status:1,FineDate:0,FineNumber:0,BusRef:0,IsTraffic:o})}),$(".ViolationsList").append('<div class="PopupResults mt-3"><div class="row PopupResultsRow"></div></div>'),$(".PopupResultsRow").append('<div class="col-12 col-lg-9 DashboardPaymentListDetialsTableAndPrint"></div>'),$(".DashboardPaymentListDetialsTableAndPrint").append('<div class="mt-0  p-2 DivToPrint"><div class="table-responsive AjaxTable LoadSVG"></div></div>'),ShowDisplayName(i,o),LoadSVG("LoadSVG","Add"),LoadSVG("LoadSmallSVG","Add","LoadSmallSVGDiv","20px"),0==o){var l={violatorId:t,ViolatorType:1,Structre:0,Id:t,FineGroup:0,Status:1,FineDate:0,FineNumber:0,BusRef:0};GetTableData(l,a,"")}else{var l={violatorId:t,ViolatorType:1,Structre:0,Id:t,FineGroup:0,Status:1,FineDate:0,FineNumber:0,BusRef:0};GetTableData(l,"",o)}$(".PopupResultsRow").append('<div class="col-12 col-lg-3 SmartPhoneMTop"><div class="mb-3 card DashboardPaymentListDetials p-0"></div></div>'),$(".DashboardPaymentListDetials").append('<i class="fad fa-receipt"></i>'),$(".DashboardPaymentListDetials").append('<div class="TableHeader p-3 mb-2">'+DictionaryUtils.getMessage("countlbl")+'<span class="AllCount TableRowCount BlockSpan LoadSmallSVG"></span>'+DictionaryUtils.getMessage("unpaid_violation")+"<br /> "+DictionaryUtils.getMessage("accumulation")+'<span class="AllCount TotalAmount BlockSpan LoadSmallSVG"></span>'+DictionaryUtils.getMessage("saudi_riyal")+"</div>"),$(".DashboardPaymentListDetials").append('<div class="TableSelectDetails"></div>'),$(".TableSelectDetails").append('<div class="SowIfNotHaveFines">'+DictionaryUtils.getMessage("no_selected_fines")+'</div><div class="TableSelectDetailsCol1 SowIfHaveFines mb-2">'+DictionaryUtils.getMessage("number_of_violations")+'<span class="AllCount BlockSpan SpanSelectedCount">0</span>'+DictionaryUtils.getMessage("from")+' <span class="AllCount TableRowCount BlockSpan LoadSmallSVG"></span></div>'),$(".TableSelectDetails").append('<div class="TableSelectDetailsCol2"><div class="SelectedAmount"><span class="SowIfHaveFines">'+DictionaryUtils.getMessage("violation_amount")+' <span class="SelectedAmountSpan BlockSpan">0</span> '+DictionaryUtils.getMessage("saudi_riyal")+'</span><button type="button" disabled class="btn btn-success PayListBtn btn-block mt-3" ><i class="fad fa-shopping-cart"></i> <span>'+DictionaryUtils.getMessage("pay_now")+'</span></button><span class="SadadMsg">'+DictionaryUtils.getMessage("sadad_pay")+"</span></div></div>")}function CheckFinesAvailability(t,a,i){grecaptcha.ready(function(){grecaptcha.execute($("#hdnReCaptchaKey").val(),{action:"submit"}).then(function(o){NetworkUtils.PDSFines.HomeStatistics(t,a,i,o).done(function(t){if(t.length>0){for(var a=0,i=0;i<t.length;i++)a+=t[i].unpaidCount;0==a?$(".RemoveAfterAvailabilityCheck").fadeOut(function(){$(".HomeStatisticsBox").after('<div class="alert alert-warning my-4 text-center">'+DictionaryUtils.getMessage("you_have_no_fines")+"</div>")}):$(".RemoveAfterAvailabilityCheck").fadeOut(function(){$(".HomeStatisticsBox,.PopupResults").fadeIn()})}}).always(function(t){}).fail(function(t,a,i){})})})}function HomeStatistics(t,a,i){grecaptcha.ready(function(){grecaptcha.execute($("#hdnReCaptchaKey").val(),{action:"submit"}).then(function(o){NetworkUtils.PDSFines.HomeStatistics(t,a,i,o).done(function(t){if(t.length>0){var i=0,o=0,n=0,l='<span class="NoFinesSpan">'+DictionaryUtils.getMessage("no_fine")+"</span>",r=0;if(""==a){for(var c=0;c<t.length;c++)1==t[c].type?("0"==t[c].unpaidCount?($(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubCountGeneral .Count").html(l),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubPriceGeneral").css("display","none")):($(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubCountGeneral .Count").html(t[c].unpaidCount),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubPriceGeneral .HomePopupSRPriceNumber").html(t[c].unpaidAmount),$(".HomeStatisticsDetailsBoxGeneralMy").click(),r=1),i+=t[c].unpaidCount):4==t[c].type?("0"==t[c].unpaidCount?($(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubCountTraffic .Count").html(l),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubPriceTraffic").css("display","none")):($(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubCountTraffic .Count").html(t[c].unpaidCount),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubPriceTraffic .HomePopupSRPriceNumber").html(t[c].unpaidAmount),1!=r&&($(".HomeStatisticsDetailsBoxTrafficMy").click(),r=1)),i+=t[c].unpaidCount):3==t[c].type?("0"==t[c].unpaidCount?($(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountGeneral .Count").html(l),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceGeneral").css("display","none")):($(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountGeneral .Count").html(t[c].unpaidCount),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceGeneral .HomePopupSRPriceNumber").html(t[c].unpaidAmount),1!=r&&($(".HomeStatisticsDetailsBoxGeneralFirms").click(),r=1)),o+=t[c].unpaidCount):5==t[c].type&&("0"==t[c].unpaidCount?($(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountTraffic .Count").html(l),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceTraffic").css("display","none")):($(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountTraffic .Count").html(t[c].unpaidCount),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceTraffic .HomePopupSRPriceNumber").html(t[c].unpaidAmount),1!=r&&($(".HomeStatisticsDetailsBoxTrafficFirms").click(),r=1)),o+=t[c].unpaidCount);0==i?$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderCount").html(l):$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderCount").html(i),0==o?$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderCount").html(l):$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderCount").html(o)}else{for(var c=0;c<t.length;c++)1==t[c].type?("0"==t[c].unpaidCount?($(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountGeneral .Count").html(l),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceGeneral").css("display","none")):($(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountGeneral .Count").html(t[c].unpaidCount),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceGeneral  .HomePopupSRPriceNumber").html(t[c].unpaidAmount),1!=r&&($(".HomeStatisticsDetailsBoxGeneralFirms").click(),r=1)),n+=t[c].unpaidCount):5==t[c].type&&("0"==t[c].unpaidCount?($(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountTraffic .Count").html(l),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceTraffic").css("display","none")):($(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountTraffic .Count").html(t[c].unpaidCount),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceTraffic .HomePopupSRPriceNumber").html(t[c].unpaidAmount),1!=r&&($(".HomeStatisticsDetailsBoxTrafficFirms").click(),r=1)),n+=t[c].unpaidCount);0==n?$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderCount").html(l):$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderCount").html(n)}}}).always(function(t){}).fail(function(t,a,i){})})})}function ShowDisplayName(t,a){$(".ViolationsList").prepend('<div class="QueryName"><h5 class="QueryNameHeader"></h5></div><div class="LoadingBeforeSend RemoveAfterAvailabilityCheck"><span class="LoadingBeforeSendSpan "><img src="../new/Progress2.svg" class="InlineProgress" /></span></div><div class="HomeStatisticsBox"></div>'),0==a?($(".QueryName .QueryNameHeader").append(DictionaryUtils.getMessage("hello")+" "),$(".QueryName .QueryNameHeader").append(DictionaryUtils.chooseWord(t.personalInfo.personalInfo.firstName,t.personalInfo.personalInfo.firstNameT)+" "),$(".QueryName .QueryNameHeader").append(DictionaryUtils.chooseWord(t.personalInfo.personalInfo.fatherName,t.personalInfo.personalInfo.fatherNameT)+" "),$(".QueryName .QueryNameHeader").append(DictionaryUtils.chooseWord(t.personalInfo.personalInfo.familyName,t.personalInfo.personalInfo.familyNameT)),$(".QueryName .QueryNameHeader").append('<div class="HomeCountMainBoxLoad"></div>'),$(".HomeStatisticsBox").append('<div class="row mb-2 text-center"><div class="col-6 HomeStatisticsBoxMyViolation"></div><div class="col-6 HomeStatisticsBoxFirmsViolation" style="display:none"></div></div>'),$(".HomeStatisticsBoxMyViolation").append('<div class="card p-0"></div>'),$(".HomeStatisticsBoxMyViolation .card").append('<div class="row row-0"><div class="col-12 col-lg-2 HomeStatisticsBoxHeader HomeStatisticsBoxHeaderMy"></div><div class="col-12 col-lg-10 HomeStatisticsDetailsBox"></div></div>'),$(".HomeStatisticsBoxMyViolation .HomeStatisticsDetailsBox").append('<div class="row"><div class="col-6 HomeStatisticsDetailsBoxItem HomeStatisticsDetailsBoxGeneral HomeStatisticsDetailsBoxGeneralMy HomeStatisticsDetailsBoxItemActive"><i class="fas fa-sort-down" style="display:block"></i></div><div class="col-6 HomeStatisticsDetailsBoxItem  HomeStatisticsDetailsBoxTraffic HomeStatisticsDetailsBoxTrafficMy"><i class="fas fa-sort-down"></i></div></div>'),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeader").append('<div class="row"><div class="col-12 PopupHeaderIconCol" style="display:none"><i class="fad fa-user-tie PopupHeaderIcon"></i></div><div class="col-12 colClassForIpad"><h5 class="HomeStatisticsBoxHeaderTXT"></h5><span class="HomeStatisticsBoxHeaderCount LoadingBeforeSend NumberStyle"></span></div></div>'),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderTXT").append(DictionaryUtils.getMessage("my_violations")),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderCount").append(""),$(".HomeStatisticsBoxMyViolation .HomeStatisticsDetailsBoxGeneral").append('<div class="row"><div class="col-12 col-lg-5 "><i class="fad fa-th-list PopupHeaderIconCol"></i><h5 class="HomeStatisticsBoxHeaderSubTXT HomeStatisticsBoxHeaderSubTXTGeneral"></h5></div><div class="col-12 col-lg-6"><h5 class="HomeStatisticsBoxHeaderSubCount HomeStatisticsBoxHeaderSubCountGeneral"><h5><span class="HomeStatisticsBoxHeaderSubPrice HomeStatisticsBoxHeaderSubPriceGeneral"></span></div></div>'),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubTXTGeneral").append(DictionaryUtils.getMessage("general")),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubCountGeneral").append('<span class="Count LoadingBeforeSend NumberStyle"></span>'),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubPriceGeneral").append('<span class="HomePopupSRPriceNumber LoadingBeforeSend NumberStyle"></span> <span class="HomePopupSRPriceTXT">'+DictionaryUtils.getMessage("sr")+"</span>"),$(".HomeStatisticsBoxMyViolation .HomeStatisticsDetailsBoxTraffic").append('<div class="row"><div class="col-12 col-lg-5 "><i class="fad fa-car PopupHeaderIconCol"></i><h5 class="HomeStatisticsBoxHeaderSubTXT HomeStatisticsBoxHeaderSubTXTTraffic"></h5></div><div class="col-12 col-lg-6"><h5 class="HomeStatisticsBoxHeaderSubCount HomeStatisticsBoxHeaderSubCountTraffic"><h5><span class="HomeStatisticsBoxHeaderSubPrice HomeStatisticsBoxHeaderSubPriceTraffic"></span></div></div>'),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubTXTTraffic").append(DictionaryUtils.getMessage("traffic")),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubCountTraffic").append('<span class="Count LoadingBeforeSend NumberStyle"></span>'),$(".HomeStatisticsBoxMyViolation .HomeStatisticsBoxHeaderSubPriceTraffic").append('<span class="HomePopupSRPriceNumber LoadingBeforeSend NumberStyle"></span> <span class="HomePopupSRPriceTXT">'+DictionaryUtils.getMessage("sr")+"</span>"),$(".HomeStatisticsBoxFirmsViolation").append('<div class="card p-0"></div>'),$(".HomeStatisticsBoxFirmsViolation .card").append('<div class="row row-0"><div class="col-12 col-lg-2 HomeStatisticsBoxHeader HomeStatisticsBoxHeaderFirms"></div><div class="col-12 col-lg-10 HomeStatisticsDetailsBox"></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsDetailsBox").append('<div class="row"><div class="col-6 HomeStatisticsDetailsBoxItem HomeStatisticsDetailsBoxGeneral HomeStatisticsDetailsBoxGeneralFirms"><i class="fas fa-sort-down"></i></div><div class="col-6 HomeStatisticsDetailsBoxItem HomeStatisticsDetailsBoxTraffic HomeStatisticsDetailsBoxTrafficFirms"><i class="fas fa-sort-down"></i></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeader").append('<div class="row"><div class="col-12 PopupHeaderIconCol" style="display:none"><i class="fad fa-store PopupHeaderIcon"></i></div><div class="col-12 colClassForIpad"><h5 class="HomeStatisticsBoxHeaderTXT"></h5><span class="HomeStatisticsBoxHeaderCount LoadingBeforeSend NumberStyle"></span></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderTXT").append(DictionaryUtils.getMessage("my_firms")),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderCount").append(""),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsDetailsBoxGeneral").append('<div class="row"><div class="col-12 col-lg-5 "><i class="fad fa-th-list PopupHeaderIconCol"></i><h5 class="HomeStatisticsBoxHeaderSubTXT HomeStatisticsBoxHeaderSubTXTGeneral"></h5></div><div class="col-12 col-lg-6"><h5 class="HomeStatisticsBoxHeaderSubCount HomeStatisticsBoxHeaderSubCountGeneral"><h5><span class="HomeStatisticsBoxHeaderSubPrice HomeStatisticsBoxHeaderSubPriceGeneral"></span></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubTXTGeneral").append(DictionaryUtils.getMessage("general")),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountGeneral").append('<span class="Count LoadingBeforeSend NumberStyle"></span>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceGeneral").append('<span class="HomePopupSRPriceNumber LoadingBeforeSend NumberStyle"></span> <span class="HomePopupSRPriceTXT">'+DictionaryUtils.getMessage("sr")+"</span>"),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsDetailsBoxTraffic").append('<div class="row"><div class="col-12 col-lg-5 "><i class="fad fa-car PopupHeaderIconCol"></i><h5 class="HomeStatisticsBoxHeaderSubTXT HomeStatisticsBoxHeaderSubTXTTraffic"></h5></div><div class="col-12 col-lg-6"><h5 class="HomeStatisticsBoxHeaderSubCount HomeStatisticsBoxHeaderSubCountTraffic"><h5><span class="HomeStatisticsBoxHeaderSubPrice HomeStatisticsBoxHeaderSubPriceTraffic"></span></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubTXTTraffic").append(DictionaryUtils.getMessage("traffic")),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountTraffic").append('<span class="Count LoadingBeforeSend NumberStyle"></span>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceTraffic").append('<span class="HomePopupSRPriceNumber LoadingBeforeSend NumberStyle"></span> <span class="HomePopupSRPriceTXT">'+DictionaryUtils.getMessage("sr")+"</span>"),$(".HomeStatisticsDetailsBoxItem").click(function(){$(".HomeStatisticsDetailsBoxItemActive").removeClass("HomeStatisticsDetailsBoxItemActive"),$(this).addClass("HomeStatisticsDetailsBoxItemActive"),$(".HomeStatisticsDetailsBoxItem .fa-sort-down").css("display","none"),$(this).find(".fa-sort-down").css("display","block")}),$(".HomeStatisticsDetailsBoxGeneralMy").click(function(){$(".SelectType").val("1"),$(".IsTrafficSelect").val("1"),$(".TargetType").css("display","none"),$(".HomePopupDDLFilter").css("display","none"),payerTypePayment=""!=payerTypePayment?payerTypePayment:3,isTrafficPayment=1,$(".SearchBtn").click()}),$(".HomeStatisticsDetailsBoxTrafficMy").click(function(){$(".SelectType").val("1"),$(".IsTrafficSelect").val("2"),$(".TargetType").css("display","none"),$(".HomePopupDDLFilter").css("display","none"),payerTypePayment=""!=payerTypePayment?payerTypePayment:3,isTrafficPayment=2,$(".SearchBtn").click()}),$(".HomeStatisticsDetailsBoxGeneralFirms").click(function(){$(".SelectType").val("3"),$(".IsTrafficSelect").val("1"),$(".TargetType3").css("display","inline-flex"),$(".HomePopupDDLFilter").css("display","block"),payerTypePayment=""!=payerTypePayment?payerTypePayment:2,isTrafficPayment=1,$(".SearchBtn").click()}),$(".HomeStatisticsDetailsBoxTrafficFirms").click(function(){$(".SelectType").val("3"),$(".IsTrafficSelect").val("2"),$(".TargetType3").css("display","inline-flex"),$(".HomePopupDDLFilter").css("display","block"),payerTypePayment=""!=payerTypePayment?payerTypePayment:2,isTrafficPayment=2,$(".SearchBtn").click()}),HomeStatistics(t.personalInfo.personalInfo.personID,"",$(".TXTBirthDate").val())):($(".QueryName .QueryNameHeader").append(t.personalInfo.personalInfo.name),$(".HomeStatisticsBox").append('<div class="row mb-2 text-center"><div class="col-6 HomeStatisticsBoxFirmsViolation" ></div></div>'),$(".HomeStatisticsBoxFirmsViolation").append('<div class="card p-0"></div>'),$(".HomeStatisticsBoxFirmsViolation .card").append('<div class="row row-0"><div class="col-12 col-lg-2 HomeStatisticsBoxHeader HomeStatisticsBoxHeaderFirms"></div><div class="col-12 col-lg-10 HomeStatisticsDetailsBox"></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsDetailsBox").append('<div class="row"><div class="col-6 HomeStatisticsDetailsBoxItem HomeStatisticsDetailsBoxGeneral HomeStatisticsDetailsBoxGeneralFirms"><i class="fas fa-sort-down"></i></div><div class="col-6 HomeStatisticsDetailsBoxItem HomeStatisticsDetailsBoxTraffic HomeStatisticsDetailsBoxTrafficFirms"><i class="fas fa-sort-down"></i></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeader").append('<div class="row"><div class="col-12 PopupHeaderIconCol" style="display:none"><i class="fad fa-store PopupHeaderIcon"></i></div><div class="col-12 colClassForIpad"><h5 class="HomeStatisticsBoxHeaderTXT"></h5><span class="HomeStatisticsBoxHeaderCount LoadingBeforeSend NumberStyle"></span></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderTXT").append(DictionaryUtils.getMessage("fines")),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderCount").append(""),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsDetailsBoxGeneral").append('<div class="row"><div class="col-12 col-lg-5 "><i class="fad fa-th-list PopupHeaderIconCol"></i><h5 class="HomeStatisticsBoxHeaderSubTXT HomeStatisticsBoxHeaderSubTXTGeneral"></h5></div><div class="col-12 col-lg-6"><h5 class="HomeStatisticsBoxHeaderSubCount HomeStatisticsBoxHeaderSubCountGeneral"><h5><span class="HomeStatisticsBoxHeaderSubPrice HomeStatisticsBoxHeaderSubPriceGeneral"></span></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubTXTGeneral").append(DictionaryUtils.getMessage("general")),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountGeneral").append('<span class="Count LoadingBeforeSend NumberStyle"></span>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceGeneral").append('<span class="HomePopupSRPriceNumber LoadingBeforeSend NumberStyle"></span> <span class="HomePopupSRPriceTXT">'+DictionaryUtils.getMessage("sr")+"</span>"),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsDetailsBoxTraffic").append('<div class="row"><div class="col-12 col-lg-5 "><i class="fad fa-car PopupHeaderIconCol"></i><h5 class="HomeStatisticsBoxHeaderSubTXT HomeStatisticsBoxHeaderSubTXTTraffic"></h5></div><div class="col-12 col-lg-6"><h5 class="HomeStatisticsBoxHeaderSubCount HomeStatisticsBoxHeaderSubCountTraffic"><h5><span class="HomeStatisticsBoxHeaderSubPrice HomeStatisticsBoxHeaderSubPriceTraffic"></span></div></div>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubTXTTraffic").append(DictionaryUtils.getMessage("traffic")),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubCountTraffic").append('<span class="Count LoadingBeforeSend NumberStyle"></span>'),$(".HomeStatisticsBoxFirmsViolation .HomeStatisticsBoxHeaderSubPriceTraffic").append('<span class="HomePopupSRPriceNumber LoadingBeforeSend NumberStyle"></span> <span class="HomePopupSRPriceTXT">'+DictionaryUtils.getMessage("sr")+"</span>"),$(".HomeStatisticsDetailsBoxGeneralFirms").click(function(){$(".IsTrafficSelect").val("1"),isTrafficPayment=1,payerTypePayment=""!=payerTypePayment?payerTypePayment:2,$(".SearchBtn").click()}),$(".HomeStatisticsDetailsBoxTrafficFirms").click(function(){$(".IsTrafficSelect").val("2"),isTrafficPayment=2,payerTypePayment=""!=payerTypePayment?payerTypePayment:2,$(".SearchBtn").click()}),HomeStatistics(t.personalInfo.personalInfo.firmID,$(".TXTFirms-LaborId").val(),"")),$(".LoadingBeforeSend").html('<span class="LoadingBeforeSendSpan "><img src="../new/Progress2.svg" class="InlineProgress" /></span>')}function GetTableData(t,a,i){grecaptcha.ready(function(){grecaptcha.execute($("#hdnReCaptchaKey").val(),{action:"submit"}).then(function(o){var n,l=[];NetworkUtils.PDSFines.GetViolationsByViolatorHome(t,t.violatorId,i,a,!0,o).done(function(a){var i=0,o=0,r="",c="";$(".TableRowCount").html(a.length);var d=0;a.forEach(function(t){n=[t.violatorId,"",t.resolutionTypeCode,'<img src="../img/'+t.structureId+'.svg" /> '+DictionaryUtils.chooseWord(t.structureDescriptionAr,t.structureDescription),t.violatorName,DictionaryUtils.chooseWord(t.violationGroupDescAr,t.violationGroupDesc),DictionaryUtils.formatDate(t.violationDate),t.violationNumber,t.totalAmount,DictionaryUtils.chooseWord(t.violationStatusDescAr,t.violationStatusDesc),'<button type="button" class="btn btn-primary btn-custom OpenPopupBoxDetails" finenumber="'+t.violationNumber+'" violatorid="'+t.violatorId+'"><i class="fad fa-eye"></i></button>',],d+=t.totalAmount,$(".TotalAmount").html(d),44==t.structureId?o++:i++,l.push(n)}),r=i>1?DictionaryUtils.getMessage("home_fines"):DictionaryUtils.getMessage("home_fine"),c=o>1?DictionaryUtils.getMessage("home_fines"):DictionaryUtils.getMessage("home_fine"),(i>0||o>0)&&($(".HomeCountMainBoxLoad").html(DictionaryUtils.getMessage("home_popup_header")),$(".HomeGeneralFinesCount").html(i),$(".HomeGeneralFinesCountTitle").html(r),$(".HomeTrafficFinesCount").html(o),$(".HomeTrafficFinesCountTitle").html(c),(0==i||0==o)&&$(".HomeFilesCountAnd").remove()),0==i&&0==o&&$(".HomeCountMainBoxLoad").html(DictionaryUtils.getMessage("no_unpaid_violations")),0==i&&$(".HomeGeneralFinesCountBox").remove(),0==o&&$(".HomeTrafficFinesCountBox").remove(),DrowTable(l,t)})})})}function DrowTable(t,a){$(".IsTrafficSelect").val();var i=0,o=[];$(".AjaxTable").html('<table id="DashboardViolationsTable" class="table table-striped TableReceipt TableReceiptInternal"></table >');var n=$("#DashboardViolationsTable").DataTable({dom:'<"datatable-header"fl><"datatable-scroll"t><"datatable-footer"p>',autoWidth:!1,responsive:!0,paging:!0,pageLength:8,ordering:!1,serverSide:!1,destroy:!0,lengthChange:!1,data:t,columns:[{title:""},{title:"",visible:!0},{title:""},{title:DictionaryUtils.getMessage("structure"),visible:0==a.Structre},{title:DictionaryUtils.getMessage("type"),visible:0==a.ViolatorType},{title:DictionaryUtils.getMessage("fine_type"),visible:0==a.FineGroup},{title:DictionaryUtils.getMessage("date"),visible:0==a.FineDate},{title:DictionaryUtils.getMessage("fine_number"),visible:0==a.FineNumber},{title:DictionaryUtils.getMessage("violation_amount")},{title:DictionaryUtils.getMessage("transaction_status"),visible:0==a.Status},{title:DictionaryUtils.getMessage("details")},],language:{search:"<span>"+DictionaryUtils.getMessage("filter")+":</span> INPUT",searchPlaceholder:DictionaryUtils.getMessage("filter_placeholder"),lengthMenu:"<span>"+DictionaryUtils.getMessage("show")+":</span> MENU",info:DictionaryUtils.getMessage("showing")+" _START_ "+DictionaryUtils.getMessage("to")+" _END_ "+DictionaryUtils.getMessage("of")+" _TOTAL_ "+DictionaryUtils.getMessage("pagingviolations"),paginate:{first:DictionaryUtils.getMessage("first"),last:DictionaryUtils.getMessage("Last"),next:DictionaryUtils.getMessage("next"),previous:DictionaryUtils.getMessage("previous")},zeroRecords:DictionaryUtils.getMessage("no_data_available_table")},columnDefs:[{orderable:!1,className:"select-checkbox",targets:1,createdCell:function(t,a,i,o,n){55==i[2]||2==i[9]||isPaymentDisabled?($(t).click(function(t){t.stopPropagation()}),$(t).html('<input type="checkbox" disabled="disabled" style="width: 19px;height: 19px; margin-top:15px; margin-right:0px;" />'),$(t).removeClass("select-checkbox")):$(t).addClass("select-checkbox")}},{targets:[0],visible:!1},{targets:[2],visible:!1},{targets:[3,6,7,8],className:"HideOnMobile"}],select:{style:"multi",selector:"td:first-child"},fnInitComplete:function(){},drawCallback:function(){$(this).find("tbody tr td").length<=1&&($("#DashboardViolationsTable_wrapper").css("display","none"),$("#DashboardViolationsTable_wrapper").after('<div class="alert alert-success NoData" role="alert">'+DictionaryUtils.getMessage("no_data")+"</div >"),$(".TotalAmount ").html(0))}}),l="ar"==DictionaryUtils.getLanguage()?"right":"left";$("#DashboardViolationsTable").css("text-align",l),n.on("click","th.select-checkbox",function(t,a,i,o){if($("th.select-checkbox").hasClass("selected"))n.rows().deselect(),$("th.select-checkbox").removeClass("selected");else{n.rows().deselect();for(var l=0;l<DataTableLimit;l++)n.rows(l).select();$("th.select-checkbox").addClass("selected")}}).on("select deselect",function(t,a,i,o){n.rows({selected:!0}).count()!==n.rows().count()?$("th.select-checkbox").removeClass("selected"):$("th.select-checkbox").addClass("selected")}).on("click","td",function(){var t=0;0!=t||$(this).hasClass("select-checkbox")||$(this).parent().find(".OpenPopupBoxDetails").get(0).click(),t++}),n.on("select",function(t,a,l,r){var c=n.rows(r).data().toArray();r>=0&&c.length>0||(o=[],i=0);var d=a.rows({selected:!0});if(d.count()==DataTableLimit?$("th.select-checkbox").addClass("selected"):$("th.select-checkbox").removeClass("selected"),d.count()<=DataTableLimit)for(var m=0;m<c.length;m++){var p={FineNumber:c[m][7],FineAmount:c[m][8]};55==c[m][2]||isPaymentDisabled?n.rows(m).deselect():(o.push(p),i+=c[m][8])}$(".SpanSelectedCount").html(o.length),$(".SelectedAmountSpan").html(i),0==parseInt($(".SelectedAmountSpan").html())?($(".PayListBtn").attr("disabled","disabled"),$(".SowIfNotHaveFines").css("display","inline-block"),$(".SowIfHaveFines").css("display","none")):($(".PayListBtn").removeAttr("disabled"),$(".SowIfNotHaveFines").css("display","none"),$(".SowIfHaveFines").css("display","inline-block")),d.count()>DataTableLimit&&a.rows(r).deselect()}).on("deselect",function(t,a,l,r){var c=n.rows(r).data().toArray();a.rows({selected:!0}).count()==DataTableLimit?$("th.select-checkbox").addClass("selected"):$("th.select-checkbox").removeClass("selected");for(var d=0;d<c.length;d++){var m=o.findIndex(function(t){return t.FineNumber===c[d][7]});-1===m||55==c[d][2]||isPaymentDisabled||(o.splice(m,1),i-=c[d][8])}$(".SpanSelectedCount").html(n.rows({selected:!0}).count()),$(".SelectedAmountSpan").html(i),0==parseInt($(".SelectedAmountSpan").html())?($(".PayListBtn").attr("disabled","disabled"),$(".SowIfNotHaveFines").css("display","inline-block"),$(".SowIfHaveFines").css("display","none")):($(".PayListBtn").removeAttr("disabled"),$(".SowIfNotHaveFines").css("display","none"),$(".SowIfHaveFines").css("display","inline-block"))}).on("click",".OpenPopupBoxDetails",function(t){t.stopPropagation();var a=$(this).attr("FineNumber"),i=$(this).attr("violatorid"),o=$(".TableDetailsCounter").html();console.log("asd",parseInt(o)),0==o&&GetFineDetails(a,i,payerIDPayment,payerTypePayment,loginTypePayment,"ViolationDetails",!1,!0,!0),o++,$(".TableDetailsCounter").html(o)}),$("#DashboardViolationsTable thead").addClass("thead-light"),$(".PayListBtn").unbind().click(function(){$(this).attr("disabled","disabled"),setTimeout(function t(){$(".PayListBtn").removeAttr("disabled")},1e3),$(".ViolationsList").fadeOut(function(){$(".RedirectToPaymentsDiv").remove(),$(".ViolationsList").after('<div class="text-center DashboardPageLoadingTXT RedirectToPaymentsDiv" >'+DictionaryUtils.getMessage("redirect_to_payment_site")+"</div>"),CreateOrder({PayerID:payerIDPayment,ViolatorID:payerIDPayment,OrderType:isTrafficPayment,PayerType:payerTypePayment,LoginType:loginTypePayment,FiensInfoDTOs:o})})})}function GetFirmsList(t){grecaptcha.ready(function(){grecaptcha.execute($("#hdnReCaptchaKey").val(),{action:"submit"}).then(function(a){NetworkUtils.PDSFines.GetFirmsList(t,a,!0).done(function(t){if(t.length>0){$(".HomeStatisticsBoxFirmsViolation").css("display","block");for(var a=0;a<t.length;a++)$(".DDLFirms").append('<option value="'+t[a].firmID+'">'+t[a].name+"</option>")}else $(".TargetType3 select,.TargetType3 .input-group-prepend").css("display","none"),$(".TargetType3 select").after('<div class="alert alert-info" role="alert">'+DictionaryUtils.getMessage("you_have_no_firms")+"</div >"),$(".firmOption").remove(),$(".HomeStatisticsBoxMyViolation").removeClass("col-6").addClass("col-12 col-lg-6")}).always(function(t){})})})}function CreateOrder(t){NetworkUtils.Payments.CreateOrder(t).done(function(t){var a=document.getElementById("payment_confirmation");for(var i in t){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("id",i),o.setAttribute("name",i),o.setAttribute("value",t[i]),a.appendChild(o)}a.submit()}).fail(function(t){$(".DashboardPageLoadingTXT").fadeOut(function(){$(".ViolationsList").fadeIn()});var a=null!=t.responseText?t.responseText:DictionaryUtils.getMessage("error-occured");bootbox.dialog({message:a,className:"ar"===DictionaryUtils.getLanguage()?"RTL":"",buttons:{close:{label:DictionaryUtils.getMessage("close"),className:"pay-btn"}}})})}function GetPersonalInfo(t,a,i,o=0){NetworkUtils.PDSFines.extGetPersonalInfoByIdAndDob(t,a,i,o).done(function(i){if(0==o&&void 0==i.personalInfo){OpenPopup("animate__backInDown","animate__backInDown",500),$(".CustomModalBodyCard").html(`
        <div class="text-center">
            <h4>`+DictionaryUtils.getMessage("enter_otp")+`</h4>
            <div class="OTPInputs d-flex justify-content-center my-3 LtrDir">
                <input class="NumberOnly InputIndex-1" InputIndex="1" type="tel" autofocus maxlength="1" />
                <input class="NumberOnly InputIndex-2" InputIndex="2" type="tel" maxlength="1"/>
                <input class="NumberOnly InputIndex-3" InputIndex="3" type="tel" maxlength="1"/>
                <input class="NumberOnly InputIndex-4 LastInput" InputIndex="4" type="tel" maxlength="1"/>
            </div>

            <div class="OTPBtns">
                <button class="btn btn-primary py-1 px-3 otpSend" type="button" disabled>`+DictionaryUtils.getMessage("confirm")+`</button>
                <button class="btn btn-danger py-1 px-3 otpCancel" type="button">`+DictionaryUtils.getMessage("cancel")+`</button>
                <button class="btn btn-dark py-1 px-3 otpResend" type="button" disabled>`+DictionaryUtils.getMessage("resend")+`</button>
            </div>
            <div class="CustomAlert mt-3 " role="alert">`+DictionaryUtils.getMessage("resend_timer")+`<span class="countdown"></span></div>
        </div>
    `),$(".InputIndex-1").focus(),$(".OTPInputs input").keyup(function(){if(this.value=this.value.replace(/[^0-9]/g,""),8==event.keyCode||13==event.keyCode||46==event.keyCode||event.keyCode>=35&&event.keyCode<=40||event.keyCode>=48&&event.keyCode<=57||event.keyCode>=96&&event.keyCode<=105||event.preventDefault(),8==event.keyCode||event.keyCode>=48&&event.keyCode<=57||event.keyCode>=96&&event.keyCode<=105||229==event.keyCode){var t=parseInt($(this).attr("InputIndex"));8==event.keyCode?t--:t++,$(".InputIndex-"+t).focus(),$(".InputIndex-"+t).select()}var a=!0;$(".OTPInputs .NumberOnly").each(function(){""==$.trim($(this).val())&&(a=!1)}),!1==a?$(".otpSend").attr("disabled","disabled"):$(".otpSend").removeAttr("disabled"),13==event.keyCode&&a&&$(".otpSend").click()});var n="1:00";if(void 0!=i.status&&void 0!=i.expirationTime&&2==i.status){var l=new Date,r=new Date(i.expirationTime),c=l.getHours()+":"+l.getMinutes()+":"+l.getSeconds(),d=r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();s=c.split(":"),sec=(e=d.split(":"))[2]-s[2],min_carry=0,sec<0&&(sec+=60,min_carry+=1),n=diff=(min=e[1]-s[1]-min_carry)+":"+sec}var m=setInterval(function(){var t=0,a=0,i=n.split(":");t=parseInt(i[0],10),a=parseInt(i[1],10),(t=--a<0?--t:t)<0&&clearInterval(m),a=(a=a<0?59:a)<10?"0"+a:a,$(".countdown").html(t+":"+a),n=t+":"+a,0==t&&0==a&&($(".CustomAlert").html(DictionaryUtils.getMessage("resendotp")),$(".otpResend").removeAttr("disabled"),clearInterval(m))},1e3);$(".otpSend").on("click",function(i){$(this).attr("disabled","disabled"),grecaptcha.ready(function(){grecaptcha.execute($("#hdnReCaptchaKey").val(),{action:"submit"}).then(function(i){var o=$(".InputIndex-1").val()+$(".InputIndex-2").val()+$(".InputIndex-3").val()+$(".InputIndex-4").val();GetPersonalInfo(t,a,i,o)})})}),$(".CustomModalClose").on("click",function(t){clearInterval(m),cloaseModal()}),$(".otpCancel").on("click",function(t){clearInterval(m),cloaseModal()}),$(".otpResend").on("click",function(i){clearInterval(m),grecaptcha.ready(function(){grecaptcha.execute($("#hdnReCaptchaKey").val(),{action:"submit"}).then(function(i){GetPersonalInfo(t,a,i)})})})}else cloaseModal(),setTimeout(function(){DrowPopupBody(t,a,i)},500)}).always(function(t){}).fail(function(t,a,i){$(".se-pre-con").fadeOut(function(){if(OpenPopup("animate__backInDown","animate__backInDown",500),void 0!=t.responseJSON.errorMessageDTO){$(".CustomModalBodyCard").html('<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.chooseWord(t.responseJSON.errorMessageDTO.messageAr,t.responseJSON.errorMessageDTO.message)+"</div>");return}if(t.responseJSON.messageAr){$(".CustomModalBodyCard").html('<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.chooseWord(t.responseJSON.messageAr,t.responseJSON.message)+"</div>");return}if(void 0==t.responseJSON){$(".CustomModalBodyCard").html('<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("errorgettingdata")+"</div>");return}$(".CustomModalBodyCard").html('<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("errorgettingdata")+"</div>")})})}$(document).ready(function(t){t('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(a){t(".TXTBirthDate").val(""),t(".TXTIDNumber").val(""),t(".TXTFirms-FirmID").val(""),t(".TXTFirms-FineNumber").val(""),t(".TXTFirms-LaborId").val("")}),t("#btnlogin").click(function(){var a=t(".TXTIDNumber").val();if(""==a){var i='<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("id_number_required")+"</div>";t(".CustomModalBodyCard").html(i),OpenPopup("animate__backInDown","animate__backInDown")}else if(10!=a.length||a.startsWith("7")){var i='<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("invalid_idnumber")+"</div>";t(".CustomModalBodyCard").html(i),OpenPopup("animate__backInDown","animate__backInDown")}else window.location.href="/callback.aspx?idx="+a}),t(".NumberOnly").on("input",function(t){this.value=this.value.replace(/[^0-9 ٠-٩ ۰-۹]/g,"")}),t(".NumberOnly").keyup(function(){t(this).val(DictionaryUtils.toEnglishNumber(t(this).val()))}),t('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(a){var i=t(a.target).attr("href");t(i).find("input").val("")}),t("body").append('<span class="TableDetailsCounter" style="display:none">0</span>'),t("#linkIndividualsLogin").click(function(t){loginTypePayment=1}),t(".IndividualsEnquiry").click(function(a){loginTypePayment="",payerTypePayment="",payerIDPayment="",isTrafficPayment=0;var i="",o=t(".TXTIDNumber").val(),n=t(".TXTFineNumber").val(),l=t(".TXTBirthDate").val();""==o?i=i+'<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("id_number_required")+"</div>":10!=o.length?i=i+'<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("id_number_ten_10_digits")+"</div>":10==o.length&&o.startsWith(7)&&(i=i+'<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("invalid_idnumber")+"</div>"),""==n&&""==l&&(i=i+'<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("enterviolationnumberordob")+"</div>"),""!=o&&""!=n?(loginTypePayment=3,payerTypePayment=4,payerIDPayment=o):""!=o&&""!=l&&(loginTypePayment=2,payerIDPayment=o),10!=o.length||o.startsWith(7)||""==n&&""==l?(t(".CustomModalBodyCard").html(i),OpenPopup("animate__backInDown","animate__backInDown",500)):""!=n?n.length<=14?(i+='<div class="HomePopupValidationItem"></div>',t(".CustomModalBodyCard").html('<div class="ViolationDetails"></div>'),OpenPopup("animate__backInDown","animate__backInDown"),GetFineDetails(n,o,payerIDPayment,payerTypePayment,loginTypePayment,"ViolationsList",!0,!1,!0)):(i=i+'<div class="HomePopupValidationItem">'+DictionaryUtils.getMessage("please_enter_valid_fine_number")+"</div>",OpenPopup("animate__backInDown","animate__backInDown"),t(".CustomModalBodyCard").html('<div class="alert alert-warning mb-2 text-center">'+i+"</div>")):(t(".se-pre-con").fadeIn(),0==t(".LoadedAfterPopupOpen").length?LoadScript("individual"):onloadCallbackIndividual())}),t(".FirmsEnquiry").click(function(){loginTypePayment="",payerTypePayment="",payerIDPayment="",isTrafficPayment=0;var a="",i=t(".TXTFirms-FirmID").val(),o=t(".TXTFirms-FineNumber").val(),n=t(".TXTFirms-LaborId").val();""==i?a=a+'<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("firm_id_requierd")+"</div>":10!=i.length?a=a+'<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("firm_id_ten_digits")+"</div>":10!=i.length||i.startsWith(7)||(a=a+'<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("pleaseenterfirmid")+"</div>"),""==o&&""==n?a=a+'<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("enterviolationnumberorlaborid")+"</div>":""!=n&&10!=n.length&&(a=a+'<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("labor_id_ten_digits")+"</div>"),""!=i&&""!=o?(loginTypePayment=4,payerTypePayment=4,payerIDPayment=i):""!=i&&""!=n&&(loginTypePayment=5,payerTypePayment=4,payerIDPayment=i),10==i.length&&i.startsWith(7)&&(""!=o||""!=n)?""!=o?o.length<=14?(a+='<div class="HomePopupValidationItem"></div>',t(".CustomModalBodyCard").html('<div class="ViolationsList"></div>'),OpenPopup("animate__backInDown","animate__backInDown"),GetFineDetails(o,i,payerIDPayment,payerTypePayment,loginTypePayment,"ViolationsList",!0,!1,!0)):(a=a+'<div class="HomePopupValidationItem">'+DictionaryUtils.getMessage("please_enter_valid_fine_number")+"</div>",OpenPopup("animate__backInDown","animate__backInDown"),t(".CustomModalBodyCard").html('<div class="alert alert-warning mb-2 text-center">'+a+"</div>")):(t(".se-pre-con").fadeIn(),0==t(".LoadedAfterPopupOpen").length?LoadScript("Firms"):onloadCallbackFirms()):(t(".CustomModalBodyCard").html(a),OpenPopup("animate__backInDown","animate__backInDown",500))}),t(".TXTFineNumber").on("input",function(a){t(".TXTBirthDate").val("")}),t(".TXTBirthDate").on("input",function(a){t(".TXTFineNumber").val("")}),t(".TXTFirms-FineNumber").on("input",function(a){t(".TXTFirms-LaborId").val("")}),t(".TXTFirms-LaborId").on("input",function(a){t(".TXTFirms-FineNumber").val("")})}),($=jQuery).fn.inputFilter=function(t){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",function(){t(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})},$(".date-default").on("dp.change",function(t){$(".TXTFineNumber").val("")});var onloadCallbackIndividual=function(){var t=$(".TXTIDNumber").val(),a=$(".TXTBirthDate").val();grecaptcha.ready(function(){grecaptcha.execute($("#hdnReCaptchaKey").val(),{action:"submit"}).then(function(i){GetPersonalInfo(t,a,i)})})},onloadCallbackFirms=function(){var t=$(".TXTFirms-FirmID").val(),a=$(".TXTFirms-LaborId").val();grecaptcha.ready(function(){grecaptcha.execute($("#hdnReCaptchaKey").val(),{action:"submit"}).then(function(i){NetworkUtils.PDSFines.extGetFirmInfoByIdAndSponsoreeId(t,a,i).done(function(i){$(".se-pre-con").fadeOut(100,function(){DrowPopupBody(t,"",i.firmlInfo,a)})}).always(function(t){}).fail(function(t,a,i){$(".se-pre-con").fadeOut(function(){OpenPopup("animate__backInDown","animate__backInDown",500),t.responseJSON.messageAr?$(".CustomModalBodyCard").html('<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.chooseWord(t.responseJSON.messageAr,t.responseJSON.message)+"</div>"):$(".CustomModalBodyCard").html('<div class="HomePopupValidationItem alert alert-warning mb-2 text-center">'+DictionaryUtils.getMessage("errorgettingdata")+"</div>")})})})})};function LoadScript(t){"individual"==t?$("body").append('<script src="https://recaptcha.net/recaptcha/api.js?onload=onloadCallbackIndividual&render='+$("#hdnReCaptchaKey").val()+'"></script>'):"Firms"==t&&$("body").append('<script src="https://recaptcha.net/recaptcha/api.js?onload=onloadCallbackFirms&render='+$("#hdnReCaptchaKey").val()+'"></script>'),DictionaryUtils.LoadExtraScripts()}