var isPaymentDisabled=$("#hfDisablePayment").val();function checkPayerType(a,e){var i="";return a==e?i=3:a.startsWith(2)?i=1:a.startsWith(7)&&(i=2),i}function GetFineDetails(a,e,i,s,t,l,o=!0,n=!1,r=!1){$("body").attr("fineNumber",a).attr("ViolatorID",e).attr("PayerID",i).attr("PayerType",s).attr("LoginType",t).attr("DrowToClass",l).attr("ShowCheckbox",o).attr("ShowbackBtn",n).attr("FromHome",r),1==n&&($(".ViolationsList").fadeOut("fast"),$(".ViolationDetails").fadeIn()),0==n?$(".CustomModalBodyCard").html('<span class="LoadingBeforeSendSpan "><img src="../new/Progress2.svg" class="InlineProgress" /></span><div class="se-pre-con text-secondary"  style="text-align: center;'):$("."+l).html('<span class="LoadingBeforeSendSpan "><img src="../new/Progress2.svg" class="InlineProgress" /></span>'),0==$(".LoadedAfterPopupOpen").length?($("body").append('<script src="https://recaptcha.net/recaptcha/api.js?onload=onloadCallbackIndividualDetails&render='+$("#hdnReCaptchaKey").val()+'"><\/script>'),DictionaryUtils.LoadExtraScripts()):onloadCallbackIndividualDetails()}var onloadCallbackIndividualDetails=function(){var a,i=$(".CustomModalTitle span").html();fineNumber=$("body").attr("fineNumber"),ViolatorID=$("body").attr("ViolatorID"),PayerID=$("body").attr("PayerID"),PayerType=$("body").attr("PayerType"),LoginType=$("body").attr("LoginType"),DrowToClass=$("body").attr("DrowToClass"),ShowCheckbox=JSON.parse($("body").attr("ShowCheckbox")),ShowbackBtn=JSON.parse($("body").attr("ShowbackBtn")),0==(FromHome=JSON.parse($("body").attr("FromHome")))&&(LoginType=1,PayerType=checkPayerType(ViolatorID,PayerID)),fineNumber.length<14?NetworkUtils.TrafficFines.extGetTrafficViolationInfo(fineNumber,ViolatorID,0,FromHome).done((function(e){if(console.log(e),FromHome&&(e=e.violationlInfo),a=e.violationlInfo.totalFineItemsAmount,$(".CustomModalBodyCard .LoadingBeforeSendSpan").remove(),1==ShowbackBtn?$(".ViolationDetails").append('<div class="popupDetails DivDetailsToPrint"><div class="row"></div></div>'):$(".CustomModalBodyCard").append('<div class="popupDetails DivDetailsToPrint"><div class="row"></div></div>'),$(".popupDetails > .row").append('<div class="col-12 popupDetailsHeader"><div class="row PopupTrafficHeader"></div></div>'),$(".popupDetails > .row").append('<div class="col-12 popupDetailsBTns"></div>'),$(".popupDetails > .row").append('<div class="col-12 popupDetailsBody"></div>'),$(".PopupTrafficHeader").append('<div class="col-12  col-lg-9 PopupTrafficHeaderDetails"><div class="row"></div></div><div class="col-12  col-lg-3 PopupTrafficHeaderMap SmartPhoneMTop"></div>'),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-id-card-alt"></i> <span>'+DictionaryUtils.getMessage("violator_id")+'</span></label><div class="detailsValue">'+e.violationlInfo.violatorID+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-hashtag"></i> <span>'+DictionaryUtils.getMessage("fine_number")+'</span></label><div class="detailsValue">'+e.violationlInfo.violationNumber+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-archway"></i> <span>'+DictionaryUtils.getMessage("violation_issuer")+'</span></label><div class="detailsValue"> <img class="PopupLogo" src="../new/44.svg" />'+e.violationlInfo.structureName+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-betamax"></i> <span>'+DictionaryUtils.getMessage("fine_type")+'</span></label><div class="detailsValue">'+e.violationlInfo.fineGroupDescription+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-calendar-alt"></i> <span>'+DictionaryUtils.getMessage("fine_date")+'</span></label><div class="detailsValue">'+DictionaryUtils.GetDateByLanguage(e.violationlInfo.violationDateG.toString().substr(6,2),e.violationlInfo.violationDateG.toString().substr(4,2),e.violationlInfo.violationDateG.toString().substr(0,4))+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-clock"></i> <span>'+DictionaryUtils.getMessage("fine_time")+'</span></label><div class="detailsValue">'+DictionaryUtils.GETTIME(e.violationlInfo.violationTime.toString()).substr(0,2)+":"+DictionaryUtils.GETTIME(e.violationlInfo.violationTime.toString()).substr(2,2)+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-tasks-alt"></i> <span>'+DictionaryUtils.getMessage("location")+'</span></label><div class="detailsValue">'+e.violationlInfo.violationCity+"</div></div></div>"),$(".PopupTrafficHeaderMap").append('<div class="map-responsive" id="map"></div>'),void 0!==e.violationlInfo.giS_LATITUDE&&void 0!==e.violationlInfo.giS_LONGITUDE)if(""!=e.violationlInfo.giS_LATITUDE&&""!=e.violationlInfo.giS_LONGITUDE&&"0.0"!=e.violationlInfo.giS_LATITUDE&&"0.0"!=e.violationlInfo.giS_LONGITUDE&&null!=e.violationlInfo.giS_LATITUDE&&null!=e.violationlInfo.giS_LONGITUDE){var s=" <a href='https://maps.google.com.sa/?q="+e.violationlInfo.giS_LATITUDE+","+e.violationlInfo.giS_LONGITUDE+"&hl="+DictionaryUtils.getLanguage()+"&region=sa' target='_blank' class='w-100 fineloc btn btn-success btn-block' data-npvmdict='fine_location'><i class='fas fa-map-marker-alt'></i> "+DictionaryUtils.getMessage("fine_location")+"</a ></p > ";$(".map-responsive").html(s)}else $(".map-responsive").html('<div class="alert alert-warning mb-1 text-center d-flex justify-content-center"><i class="fad fa-thumbtack p-1"></i><div>'+DictionaryUtils.getMessage("fine_location")+" "+DictionaryUtils.getMessage("not_specified")+" </div>");var t="",l=DictionaryUtils.GetPlateNumber(e.violationlInfo.vehiclePlate).split(" ");if("ar"==DictionaryUtils.getLanguage())for(var o=l.length;o>0;o--)t+=""==l[o-1]?"":"<span>"+l[o-1]+" </span>";else for(o=0;o<l.length;o++)t+=""==l[o]?"":"<span style='float:left !important; padding-right:5px;'>"+l[o]+" </span>";""==l&&(t+=DictionaryUtils.getMessage("not_specified")),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-road"></i> <span>'+DictionaryUtils.getMessage("street")+'</span></label><div class="detailsValue">'+e.violationlInfo.streetName+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-tachometer-fastest"></i>  <span>'+DictionaryUtils.getMessage("street_speed")+'</span></label><div class="detailsValue">'+e.violationlInfo.streetSpeed+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-tachometer-alt-fast"></i>  <span>'+DictionaryUtils.getMessage("vehicle_speed")+'</span></label><div class="detailsValue">'+e.violationlInfo.vehicleSpeed+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-grip-lines-vertical"></i> <span> '+DictionaryUtils.getMessage("lane_number")+'</span></label><div class="detailsValue">'+e.violationlInfo.laneNumber+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-brackets"></i>  <span>'+DictionaryUtils.getMessage("foreign_vehicle_number")+'</span></label><div class="detailsValue">'+e.violationlInfo.foreignVehicleNumber+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-compass"></i>  <span>'+DictionaryUtils.getMessage("vehicle_direction")+'</span></label><div class="detailsValue">'+e.violationlInfo.vehicleDirection+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-barcode-read"></i>  <span>'+DictionaryUtils.getMessage("vehicle_serial")+'</span></label><div class="detailsValue">'+e.violationlInfo.vehicleSeriallNumber+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-window-restore"></i>  <span>'+DictionaryUtils.getMessage("vehicle_type")+'</span></label><div class="detailsValue">'+DictionaryUtils.chooseWord(e.violationlInfo.vehicleTypeDescAr,e.violationlInfo.vehicleTypeDescEn)+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-car"></i>  <span>'+DictionaryUtils.getMessage("vehicle_make")+'</span></label><div class="detailsValue">'+e.violationlInfo.vehicleMake+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-cars"></i>  <span>'+DictionaryUtils.getMessage("vehicle_model")+'</span></label><div class="detailsValue">'+e.violationlInfo.vehicleModel+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-barcode-scan"></i>  <span>'+DictionaryUtils.getMessage("vehicle_plate")+'</span></label><div class="detailsValue">'+t+"</div></div></div>"),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-receipt"></i>  <span>'+DictionaryUtils.getMessage("fine_status")+'</span></label><div class="detailsValue">'+DictionaryUtils.chooseWord(e.violationlInfo.violationStatusDescAr,e.violationlInfo.violationStatusDescEn)+"</div></div></div>"),void 0!==e.violationlInfo.paymentDateG&&""!==e.violationlInfo.paymentDateG&&null!==e.violationlInfo.paymentDateG?$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-calendar-alt"></i>  <span>'+DictionaryUtils.getMessage("payment_date")+'</span></label><div class="detailsValue">'+DictionaryUtils.GetDateByLanguage(e.violationlInfo.paymentDateG.toString().substr(6,2),e.violationlInfo.paymentDateG.toString().substr(4,2),e.paymentDateG.toString().substr(0,4))+"</div></div></div>"):$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-calendar-alt"></i>  <span>'+DictionaryUtils.getMessage("payment_date")+'</span></label><div class="detailsValue">-</div></div></div>'),$(".PopupTrafficHeaderDetails .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-money-bill-wave"></i>  <span>'+DictionaryUtils.getMessage("total_violation_amount")+'</span></label><div class="detailsValue">'+e.violationlInfo.totalFineItemsAmount/2+" <span>"+DictionaryUtils.getMessage("saudi_riyal")+"</span></div></div></div>");var n=fineNumber+"";if(0==FromHome||"2"==LoginType)if($(".PopupTrafficHeaderMap").append('<div class="TrafficViolationImages alert alert-warning mb-1 mt-3"><div class="alert  text-center CheckImages PopupLoading"><div class="se-pre-con se-pre-con-small Small"></div><span class="CheckPaymentTXT">'+DictionaryUtils.getMessage("image_loading")+"</span></div></div>"),(n.startsWith("3")||n.startsWith("4")||n.startsWith("6"))&&10==n.length){var r=new Date,d=r.getFullYear()-1;r=new Date(d,r.getMonth(),r.getDay());var c=e.violationlInfo.violationDateG;r<(c=new Date(c.substr(0,4)+"-"+c.substr(4,2)+"-"+c.substr(6,2)))?NetworkUtils.PDSFines.GetTrafficViolationImages(fineNumber,ViolatorID,FromHome).done((function(a){if(null!=a&&a.violationlInfo.images.length>0){$(".TrafficViolationImages").html('<div class="VImagesCount mb-3"><span>'+a.images.length+"</span> "+DictionaryUtils.getMessage("images_available")+' </div><div class="ImagesThmbs text-center mt-2"><div class="row d-flex justify-content-center"></div></div>');for(var e=0;e<a.violationlInfo.images.length;e++)$(".TrafficViolationImages .ImagesThmbs .row").append('<img class="image-link" id="'+e+'" target="'+e+'" src="data:image/png;base64,'+a.violationlInfo.images[e]+'" />');$(".ImagesThmbs").click((function(e){e.stopPropagation(),$("#CustomModalBodyCardImages").empty(),setTimeout((function(){$(".ImagesCustomModal").fadeIn()})),$("#CustomModalBodyCardImages").html('\n                                                            <div id="carouselIndicatorsImages" class="carousel slide" data-ride="carousel">\n                                                                <ol class="carousel-indicators">\n                                                                    \x3c!-- data-slide-to here --\x3e\n                                                                </ol>\n                                                                <div class="carousel-inner">\n                                                                    \x3c!-- carousel-item here --\x3e\n                                                                </div>\n                                                                <button class="carousel-control-prev" type="button" data-bs-target="#carouselIndicatorsImages" data-bs-slide="prev">\n                                                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n                                                                    <span class="sr-only">Previous</span>\n                                                                 </button>\n                                                                 <button class="carousel-control-next" type="button" data-bs-target="#carouselIndicatorsImages" data-bs-slide="next">\n                                                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>\n                                                                    <span class="sr-only">Next</span>\n                                                                 </button>\n                                                            </div>\n                                                         ');var i="";thumbId=$(e.target).attr("id");for(var s=0;s<a.violationlInfo.images.length;s++)i=s==thumbId?"active":"",$(".carousel-indicators").append('<button type="button" data-bs-target="#carouselIndicatorsImages" data-bs-slide-to="'+s+'" class="'+i+'"></button>'),$(".carousel-inner").append('<div class="carousel-item '+i+" carousel-item-"+s+'"><img class="d-block mx-auto align-items-center" src="data:image/png;base64,'+a.violationlInfo.images[s]+'" alt="violation image"></div>');$(".CustomModalCloseImages").click((function(a){$(".ImagesCustomModal").fadeOut(),setTimeout((function(){$(".CustomModal").modal("show")}))}))}))}else $(".TrafficViolationImages").html('<div class="VImagesCount mb-3">'+DictionaryUtils.getMessage("no_violation_imgs")+" <span></div>")})).always((function(a){})).fail((function(){$(".TrafficViolationImages").html('<div class="VImagesCount mb-3">'+DictionaryUtils.getMessage("no_violation_imgs")+" <span></div>")})):$(".TrafficViolationImages").html('<div class="VImagesCount mb-3">'+DictionaryUtils.getMessage("no_violation_imgs_by_date")+" <span></div>")}else $(".TrafficViolationImages").html('<div class="VImagesCount mb-3">'+DictionaryUtils.getMessage("no_violation_imgs")+" <span></div>");else(n.startsWith("3")||n.startsWith("4")||n.startsWith("6"))&&10==n.length?DictionaryUtils.getMessage("view_violation_imgs"):DictionaryUtils.getMessage("no_violation_imgs");if(e.violationlInfo.listOfViolationItems.length>0){$(".popupDetailsBody").append('<div class="note "></div>');for(var p=0;p<e.violationlInfo.listOfViolationItems.length;p++)$(".popupDetailsBody .note").append('<div class="row row-'+p+'"><div class="col-12"><div class="alert alert-warning mb-1"><div class="row"></div></div></div></div>'),$(".popupDetailsBody .note .row-"+p+" .alert .row").append('<div class="col-12 col-md-9"><div class="detailsGroup" showInShare="No" ><label><span>'+DictionaryUtils.getMessage("fine_desc")+'</span></label><div class="detailsValue">'+(e.violationlInfo.listOfViolationItems.length>0?DictionaryUtils.chooseWord(e.violationlInfo.listOfViolationItems[p].violationTypeDescAr,e.violationlInfo.listOfViolationItems[p].violationTypeDescEn):"--")+"</div></div></div>"),$(".popupDetailsBody .note .row-"+p+" .alert .row").append('<div class="col-12 col-md-3"> <div class="detailsGroup" showInShare="No" > <label><span>'+DictionaryUtils.getMessage("bill_amount")+'</span></label> <div class="detailsValue">'+e.violationlInfo.listOfViolationItems[p].violationAmount/2+" "+DictionaryUtils.getMessage("saudi_riyal")+" "+DictionaryUtils.getMessage("bill_amount")+'</span></label> <div class="detailsValue">'+e.violationlInfo.listOfViolationItems[p].violationAmount/2+" "+DictionaryUtils.getMessage("saudi_riyal")+"  </div> </div> </div>")}$(".popupDetails .popupDetailsBTns").append('<div class="BtnToolbar BtnSmallDiv"></div>'),1==e.violationlInfo.violationStatusCode&&(isPaymentDisabled?$(".popupDetails .BtnToolbar ").before('<div class="alert alert-info mb-1"><center class="alert-info-i"><i class="fad fa-exclamation-triangle"></i><br /><span><h3>'+DictionaryUtils.getMessage("payment_stopped")+"</h3></span></center></div>"):-1==e.violationlInfo.lkResolutionType?$(".popupDetails .BtnToolbar ").before('<div class="alert alert-info mb-1"><center class="alert-info-i"><i class="fad fa-exclamation-triangle"></i><br /><span>'+DictionaryUtils.getMessage("cannot_pay_on_efaa")+"</span></center></div>"):$(".popupDetails .popupDetailsBTns .BtnToolbar").append('<a href="/addto/'+ViolatorID+"/"+fineNumber+'" class="btn btn-info DetailsPayBtn" FineNumber="'+fineNumber+'"FineAmount="'+a+'"ViolatorId="'+ViolatorID+'"PayerID="'+PayerID+'"PayerType="'+PayerType+'"LoginType="'+LoginType+'"><i class="fad fa-credit-card"></i> '+DictionaryUtils.getMessage("pay_now")+"</a>")),1==ShowbackBtn&&($(".popupDetails .popupDetailsBTns .BtnToolbar").append('<a href="#" class="btn btn-success BackToList"><i class="fad fa-redo"></i> '+DictionaryUtils.getMessage("back")+"</a>"),$(".BackToList").click((function(){$(".TDClicksCounter").val(0),$(".TableDetailsCounter").html(0),$(".ViolationDetails").fadeOut("fast",(function(){$(".ViolationsList").fadeIn(),$(".ViolationDetails").html(""),$(".BootstrapCarousel").remove()}))}))),$(".DetailsPayBtn").click((function(){$(this).css("display","none"),setTimeout((function(){$(".DetailsPayBtn").css("display","inline-block")}),1e3);var a=$(this).attr("finenumber"),e=$(this).attr("FineAmount");$(this).attr("violatorid");var i=$(this).attr("PayerID"),s=$(this).attr("PayerType"),t=$(this).attr("LoginType");$(".popupDetails").fadeOut((function(){$(".CheckPayment").fadeIn((function(){var l={PayerID:i,ViolatorID:ViolatorID,OrderType:2,PayerType:s,LoginType:t,FiensInfoDTOs:[{FineNumber:a,FineAmount:e}]};NetworkUtils.Payments.CreateOrder(l).done((function(a){document.getElementById("userid").value=ViolatorID;var e=document.getElementById("payment_confirmation");for(var i in document.getElementById("totalFineItemsAmount").value=100,a){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("id",i),s.setAttribute("name",i),s.setAttribute("value",a[i]),e.appendChild(s)}e.submit()})).fail((function(a){var e=null!=a.responseText?a.responseText:DictionaryUtils.getMessage("error-occured");bootbox.dialog({message:e,className:"ar"===DictionaryUtils.getLanguage()?"RTL":"",buttons:{close:{label:DictionaryUtils.getMessage("close"),className:"pay-btn"}}}),$(".popupDetails").fadeIn(),$(".CheckPayment").fadeOut((function(){$(".CheckPaymentFieldDiv").fadeIn()}))}))}))}))})),$(".popupDetails .BtnToolbar").append('<button type="button" class="btn btn-success PrintDetailsBtn" divtoprint="DivDetailsToPrint" header="'+DictionaryUtils.getMessage("violation_details")+'"><i class="fad fa-print"></i> <span>'+DictionaryUtils.getMessage("print")+"</span></button>"),PrintDetails(),$(".popupDetails .BtnToolbar").append('<button type="button" class="btn btn-success ShareDetailsBtn BtnSmall" ShareType="Email" divtoprint="DivDetailsToPrint" header="'+i+'"><i class="fad fa-envelope-open"></i></span></button>'),$(".popupDetails .BtnToolbar").append('<button type="button" class="btn btn-success ShareDetailsBtn BtnSmall" ShareType="WhatsApp" divtoprint="DivDetailsToPrint" header="'+i+'"><i class="fab fa-whatsapp"></i></span></button>'),Share(),$(".popupDetails").after('<div class="alert  text-center CheckPayment PopupLoading"><div class="se-pre-con Small"></div><span class="CheckPaymentTXT">يرجى الانتظار ...</span></div>')})).always((function(a){})).fail((function(){$(".CustomModalBodyCard .LoadingBeforeSendSpan").remove(),1==FromHome&&$(".CustomModalBodyCard").html('<div class="alert alert-warning text-center" role="alert">'+DictionaryUtils.getMessage("violation_notfound")+"</div >"),$(".ViolationDetails").html('<div class="alert alert-warning text-center" role="alert">'+DictionaryUtils.getMessage("violation_notfound")+"</div >")})):NetworkUtils.PDSFines.extGetViolationsByFineNumAndViolaterId(fineNumber,ViolatorID,e,FromHome).done((function(e){if(a=(e=e.violationlInfo.violationlInfo).fineAmount,$(".CustomModalBodyCard .LoadingBeforeSendSpan").remove(),1==ShowbackBtn?$(".ViolationDetails").append('<div class="popupDetails DivDetailsToPrint"><div class="row"></div></div>'):$(".CustomModalBodyCard").append('<div class="popupDetails DivDetailsToPrint"><div class="row"></div></div>'),$(".popupDetails > .row").append('<div class="col-12 popupDetailsHeader"><div class="row"></div></div>'),$(".popupDetails > .row").append('<div class="col-12 popupDetailsBTns"></div>'),$(".popupDetails > .row").append('<div class="col-12 popupDetailsBody"></div>'),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-id-card-alt"></i> <span>'+DictionaryUtils.getMessage("violator_id")+'</span></label><div class="detailsValue">'+e[0].violatorId+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-hashtag"></i> <span>'+DictionaryUtils.getMessage("fine_number")+'</span></label><div class="detailsValue">'+e[0].fineNumber+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-archway"></i> <span>'+DictionaryUtils.getMessage("violation_issuer")+'</span></label><div class="detailsValue"> <img class="PopupLogo" src="../img/'+e[0].structure.code+'.svg" />'+e[0].structureDescription+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-betamax"></i> <span>'+DictionaryUtils.getMessage("fine_type")+'</span></label><div class="detailsValue">'+e[0].fineGroupDescription+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-calendar-alt"></i> <span>'+DictionaryUtils.getMessage("fine_date")+'</span></label><div class="detailsValue">'+DictionaryUtils.formatDate(e[0].dateTimeHappened)+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-clock"></i> <span>'+DictionaryUtils.getMessage("fine_time")+'</span></label><div class="detailsValue">'+e[0].timeHappened+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-window"></i> <span>'+DictionaryUtils.getMessage("fine_booking_type")+'</span></label><div class="detailsValue">'+DictionaryUtils.chooseWord(e[0].fineBookingType,e[0].fineBookingTypeEn)+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-tasks-alt"></i> <span>'+DictionaryUtils.getMessage("fine_status")+'</span></label><div class="detailsValue">'+DictionaryUtils.chooseWord(e[0].fineStatus.description,e[0].fineStatus.latinDescription)+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-calendar-exclamation"></i> <span>'+DictionaryUtils.getMessage("fine_duedate")+'</span></label><div class="detailsValue">'+DictionaryUtils.formatDate(e[0].dueDate)+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-hashtag"></i> <span>'+DictionaryUtils.getMessage("fine_ref_num")+'</span></label><div class="detailsValue">'+e[0].fineBusinessRef+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-map-marked-alt"></i> <span>'+DictionaryUtils.getMessage("location")+'</span></label><div class="detailsValue">'+e[0].cityName+"</div></div></div>"),$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-coins"></i> <span>'+DictionaryUtils.getMessage("total_violation_amount")+'</span></label><div class="detailsValue">'+e[0].fineAmount/2+" "+DictionaryUtils.getMessage("saudi_riyal")+" </div></div></div>"),null==e[0].resolutionDate||null==e[0].resolutionDate||"0001-01-01T00:00:00"==e[0].resolutionDate?$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-calendar-alt"></i> <span>'+DictionaryUtils.getMessage("resolution_date")+'</span></label><div class="detailsValue">- </div></div></div>'):$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-calendar-alt"></i> <span>'+DictionaryUtils.getMessage("resolution_date")+'</span></label><div class="detailsValue">'+DictionaryUtils.formatDate(e[0].resolutionDate)+" </div></div></div>"),void 0!==e[0].vehiclePlate&&""!=e[0].vehiclePlate&&null!=e[0].vehiclePlate){plate=e[0].vehiclePlate;var s="",t=DictionaryUtils.GetPlateNumber(plate).split(" ");if("ar"==DictionaryUtils.getLanguage())for(var l=t.length;l>0;l--)s+=""==t[l-1]?"":"<span>"+t[l-1]+" </span>";else for(l=0;l<t.length;l++)s+=""==t[l]?"":"<span style='float:left !important; padding-right:5px;'>"+t[l]+" </span>";""==t&&(s+=DictionaryUtils.getMessage("not_specified")),null==s||""==s?$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-barcode-scan"></i>  <span>'+DictionaryUtils.getMessage("vehicle_plate")+'</span></label><div class="detailsValue">-</div></div></div>'):$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-barcode-scan"></i>  <span>'+DictionaryUtils.getMessage("vehicle_plate")+'</span></label><div class="detailsValue">'+s+"</div></div></div>"),null==e[0].vehicleRegistrationType||""==e[0].vehicleRegistrationType||null==e[0].vehicleRegistrationType?$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-window-restore"></i>  <span>'+DictionaryUtils.getMessage("vehicle_type")+'</span></label><div class="detailsValue">-</div></div></div>'):$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-window-restore"></i>  <span>'+DictionaryUtils.getMessage("vehicle_type")+'</span></label><div class="detailsValue">'+e[0].vehicleRegistrationType+"</div></div></div>"),null==e[0].vehicleMake||""==e[0].vehicleMake||null==e[0].vehicleMake?$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-car"></i>  <span>'+DictionaryUtils.getMessage("vehicle_make")+'</span></label><div class="detailsValue">-</div></div></div>'):$(".popupDetailsHeader .row").append('<div class="col-md-6 col-lg-4 col-xl-3 col-print-6"><div class="detailsGroup" showInShare="No" ><label><i class="fad fa-car"></i>  <span>'+DictionaryUtils.getMessage("vehicle_make")+'</span></label><div class="detailsValue">'+e[0].vehicleMake+"</div></div></div>")}var o=!1;if(void 0!==e[0].giS_LATITUDE&&void 0!==e[0].giS_LONGITUDE&&"0.0"!==e[0].giS_LATITUDE&&"0.0"!==e[0].giS_LONGITUDE&&""!==e[0].giS_LATITUDE&&""!==e[0].giS_LONGITUDE&&null!==e[0].giS_LATITUDE&&null!==e[0].giS_LONGITUDE){$(".CustomModalBodyCard .popupDetailsHeader").addClass("col-lg-9"),$('<div class="col-12  col-lg-3 PopupPublicHeaderMap SmartPhoneMTop"><div class="publicFineMap" id="map"></div></div>').insertAfter(".CustomModalBodyCard .row .popupDetailsHeader"),o=!0;var n=" <a href='https://maps.google.com.sa/?q="+e[0].giS_LATITUDE+","+e[0].giS_LONGITUDE+"&hl="+DictionaryUtils.getLanguage()+"&region=sa' target='_blank' class='w-100 fineloc btn btn-success btn-block' data-npvmdict='fine_location'><i class='fas fa-map-marker-alt'></i> "+DictionaryUtils.getMessage("fine_location")+"</a ></p > ";$(".publicFineMap").html(n)}if((0==FromHome||"2"==LoginType)&&32==e[0].structure.code&&184!==e[0].fineGroup.fineGroupCode){o?$('<div class="popupTGAHeaderImage"></div>').insertAfter(".PopupPublicHeaderMap .publicFineMap"):($(".CustomModalBodyCard .popupDetailsHeader").addClass("col-lg-9"),$('<div class="col-12 col-lg-3 popupTGAHeaderImage"></div>').insertAfter(".CustomModalBodyCard .row .popupDetailsHeader")),$(".popupTGAHeaderImage").append('<div class="TGAViolationImages alert alert-warning mb-1 mt-3"><div class="alert  text-center CheckImages PopupLoading"><div class="se-pre-con se-pre-con-small Small"></div><span class="CheckPaymentTXT">'+DictionaryUtils.getMessage("image_loading")+"</span></div></div>");var r=new Date,d=r.getFullYear()-1;if((r=new Date(d,r.getMonth(),r.getDay()))<new Date(e[0].dateTimeHappened)){var c=e[0].resolutionRef;NetworkUtils.PDSFines.GetPublicTransportAuthorityImages(c,ViolatorID,FromHome).done((function(a){if(void 0!==a)if(null!==a&&a.length>0){$(".TGAViolationImages").html('<div class="VImagesCount mb-3"><span>'+a.length+"</span> "+DictionaryUtils.getMessage("images_available")+' </div><div class="ImagesThmbs text-center mt-2"><div class="row d-flex justify-content-center"></div></div>');for(var e=0;e<a.length;e++)$(".TGAViolationImages .ImagesThmbs .row").append('<img class="image-link" id="'+e+'" target="'+e+'" src="data:image/png;base64,'+a[e]+'" />');$(".ImagesThmbs").click((function(e){e.stopPropagation(),$("#CustomModalBodyCardImages").empty(),setTimeout((function(){$(".ImagesCustomModal").fadeIn()})),$("#CustomModalBodyCardImages").html('\n                                                            <div id="carouselIndicatorsImages" class="carousel slide" data-ride="carousel">\n                                                                <ol class="carousel-indicators">\n                                                                    \x3c!-- data-slide-to here --\x3e\n                                                                </ol>\n                                                                <div class="carousel-inner">\n                                                                    \x3c!-- carousel-item here --\x3e\n                                                                </div>\n                                                                <button class="carousel-control-prev" type="button" data-bs-target="#carouselIndicatorsImages" data-bs-slide="prev">\n                                                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n                                                                    <span class="sr-only">Previous</span>\n                                                                 </button>\n                                                                 <button class="carousel-control-next" type="button" data-bs-target="#carouselIndicatorsImages" data-bs-slide="next">\n                                                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>\n                                                                    <span class="sr-only">Next</span>\n                                                                 </button>\n                                                            </div>\n                                                         ');var i="";thumbId=$(e.target).attr("id");for(var s=0;s<a.length;s++)i=s==thumbId?"active":"",$(".carousel-indicators").append('<button type="button" data-bs-target="#carouselIndicatorsImages" data-bs-slide-to="'+s+'" class="'+i+'"></button>'),$(".carousel-inner").append('<div class="carousel-item '+i+" carousel-item-"+s+'"><img class="d-block mx-auto align-items-center" src="data:image/png;base64,'+a[s]+'" alt="violation image"></div>');$(".CustomModalCloseImages").click((function(a){$(".ImagesCustomModal").fadeOut(),setTimeout((function(){$(".CustomModal").modal("show")}))}))}))}else $(".TGAViolationImages").html('<div class="alert alert-warning mt-3 p-4"><span class="text-center">'+DictionaryUtils.getMessage("no_violation_imgs")+" </span></div>");else $(".TGAViolationImages").html('<div class="alert alert-warning mt-3 p-4"><span class="text-center">'+DictionaryUtils.getMessage("no_violation_imgs")+" </span></div>")})).always((function(a){})).fail((function(){$(".TGAViolationImages").html('<div class="alert alert-warning mt-3 p-4"><span class="text-center">'+DictionaryUtils.getMessage("no_violation_imgs")+" </span></div>")}))}else $(".TGAViolationImages").html('<div class="VImagesCount mb-3">'+DictionaryUtils.getMessage("no_violation_imgs_by_date")+" <span></div>")}if(4==e[0].structure.code?$(".popupDetailsHeader .row").append('<div class="col-12 col-print-12"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-paperclip"></i><span>'+DictionaryUtils.getMessage("view_attachment")+'</span></label><div class="detailsValue py-3">'+DictionaryUtils.getMessage("attachment_link")+' <br /><a href="https://online.mt.gov.sa/PenaltiesInquiry" target="_blank">https://online.mt.gov.sa/PenaltiesInquiry</a></div></div></div>'):38==e[0].structure.code?$(".popupDetailsHeader .row").append('<div class="col-12 col-print-12"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa-paperclip"></i><span>'+DictionaryUtils.getMessage("view_attachment")+'</span></label><div class="detailsValue py-3">'+DictionaryUtils.getMessage("attachment_link_mot")+' <br /><a href="https://mot.gov.sa/ar/Eservices/InquiryServices/Pages/TicketsInfoPage.aspx" target="_blank">https://mot.gov.sa/ar/Eservices/InquiryServices/Pages/TicketsInfoPage.aspx</a></div></div></div>'):12==e[0].structure.code&&("مخالفات أحكام نظام الشركات"==e[0].fineGroupDescription||"VIOLATIONS OF THE PROVISIONS OF THE COMPANIES LAW"==e[0].fineGroupDescription||"VIOLATIONS OF THE PROVISIONS OF THE COMPANIES LAW"==e[0].fineGroupDescription)&&$(".popupDetailsHeader .row").append('<div class="col-12 col-print-12"><div class="detailsGroup" showInShare="Yes" ><label><i class="fad fa"></i><span> </span></label><div class="detailsValue py-3">'+DictionaryUtils.getMessage("attachment2_link")+' <br /><a href="https://mc.gov.sa/ar/pages/efaa.aspx" target="_blank">https://mc.gov.sa/ar/pages/efaa.aspx</a></div></div></div>'),e[0].groupFineDetails.length>0){$(".popupDetailsBody").append('<div class="note "></div>');for(var p=0;p<e[0].groupFineDetails.length;p++)$(".popupDetailsBody .note").append('<div class="row row-'+p+'"><div class="col-12"><div class="alert alert-warning mb-1"><div class="row"></div></div></div></div>'),$(".popupDetailsBody .note .row-"+p+" .alert .row").append('<div class="col-12 col-md-4 col-print-4"><div class="detailsGroup" showInShare="No" ><label><span>'+DictionaryUtils.getMessage("fine_desc")+'</span></label><div class="detailsValue">'+e[0].groupFineDetails[p].description+"</div></div></div>"),$(".popupDetailsBody .note .row-"+p+" .alert .row").append('<div class="col-12 col-md-4 col-print-4"> <div class="detailsGroup" showInShare="No" > <label><span>'+DictionaryUtils.getMessage("fine_count")+' </span></label> <div class="detailsValue">'+e[0].groupFineDetails[p].fineCount+" </div> </div> </div>"),$(".popupDetailsBody .note .row-"+p+" .alert .row").append('<div class="col-12 col-md-4 col-print-4"> <div class="detailsGroup" showInShare="No" > <label><span>'+DictionaryUtils.getMessage("bill_amount")+' </span></label> <div class="detailsValue">'+e[0].groupFineDetails[p].amount/2+" "+DictionaryUtils.getMessage("saudi_riyal")+" </div> </div> </div>")}if($(".popupDetails .popupDetailsBTns").append('<div class="BtnToolbar BtnSmallDiv"></div>'),1==e[0].fineStatus.code&&(isPaymentDisabled?($(".popupDetails .BtnToolbar ").before('<div class="alert alert-info my-1"><center class="alert-info-i"><i class="fad fa-exclamation-triangle "></i><span class="PaymentIssueMessage"></span></center></div>'),$(".PaymentIssueMessage").append("<h3>"+DictionaryUtils.getMessage("payment_stopped")+"</h3>")):-1==e[0].lkResolutionType?($(".popupDetails .BtnToolbar ").before('<div class="alert alert-info my-1"><center class="alert-info-i"><i class="fad fa-exclamation-triangle "></i><span class="PaymentIssueMessage"></span></center></div>'),$(".PaymentIssueMessage").append("<h3>"+DictionaryUtils.getMessage("cannot_pay_on_efaa")+"</h3>"),60==e[0].resolutionSource?($(".PaymentIssueMessage").append("<p>"+DictionaryUtils.getMessage("sadad_modal_title")+"</p>"),$(".PaymentIssueMessage").append("<p>"+DictionaryUtils.getMessage("sadad_social_sec3")+"</p>")):($(".PaymentIssueMessage").append("<p>"+DictionaryUtils.getMessage("sadad_modal_steps")+"</p><ol></ol>"),$(".PaymentIssueMessage ol").append("<li>"+DictionaryUtils.getMessage("sadad_modal_step1")+e[0].resolSourceDescription+"</li>"),$(".PaymentIssueMessage ol").append("<li>"+DictionaryUtils.getMessage("sadad_modal_step2")+e[0].resolutionRef+"</li>"),$(".PaymentIssueMessage ol").append("<li>"+DictionaryUtils.getMessage("sadad_modal_step3")+"</li>"))):$(".popupDetails .popupDetailsBTns .BtnToolbar").append('<a href="/addto/'+ViolatorID+"/"+fineNumber+'"  class="btn btn-info DetailsPayBtn" FineNumber="'+fineNumber+'"FineAmount="'+e[0].fineAmount/2+'" ViolatorId="'+ViolatorID+'"PayerID="'+PayerID+'"PayerType="'+PayerType+'"LoginType="'+LoginType+'"><i class="fad fa-credit-card"></i> '+DictionaryUtils.getMessage("pay_now")+"</a>")),1==ShowbackBtn&&($(".popupDetails .popupDetailsBTns .BtnToolbar").append('<a href="#" class="btn btn-success BackToList"><i class="fad fa-redo"></i> '+DictionaryUtils.getMessage("back")+"</a>"),$(".BackToList").click((function(){$(".TDClicksCounter").val(0),console.log($(".TDClicksCounter").val()),$(".TableDetailsCounter").html(0),$(".ViolationDetails").fadeOut("fast",(function(){$(".ViolationsList").fadeIn(),$(".ViolationDetails").html("")}))}))),$(".DetailsPayBtn").click((function(){$(this).css("display","none"),setTimeout((function(){$(".DetailsPayBtn").css("display","inline-block")}),1e3);var a=$(this).attr("finenumber"),e=$(this).attr("FineAmount");$(this).attr("violatorid");var i=$(this).attr("PayerID"),s=$(this).attr("PayerType"),t=$(this).attr("LoginType");$(".popupDetails").fadeOut((function(){$(".CheckPayment").fadeIn((function(){var l={PayerID:i,ViolatorID:ViolatorID,OrderType:1,PayerType:s,LoginType:t,FiensInfoDTOs:[{FineNumber:a,FineAmount:e}]};NetworkUtils.Payments.CreateOrder(l).done((function(a){document.getElementById("userid").value=ViolatorID;var e=document.getElementById("payment_confirmation");for(var i in document.getElementById("totalFineItemsAmount").value=100,a){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("id",i),s.setAttribute("name",i),s.setAttribute("value",a[i]),e.appendChild(s)}e.submit()})).fail((function(a){var e=null!=a.responseText?a.responseText:DictionaryUtils.getMessage("error-occured");bootbox.dialog({message:e,className:"ar"===DictionaryUtils.getLanguage()?"RTL":"",buttons:{close:{label:DictionaryUtils.getMessage("close"),className:"pay-btn"}}}),$(".popupDetails").fadeIn(),$(".CheckPayment").fadeOut((function(){$(".CheckPaymentFieldDiv").fadeIn()}))}))}))}))})),!jQuery.isEmptyObject(e[0].rejectionStatements)&&null!==e[0].rejectionStatements){$(".popupDetails .BtnToolbar").append('<button type="button" class="btn btn-success ObjectionDetailsBtn" header="'+i+'"><i class="fad fa-exclamation-circle"></i><span> '+DictionaryUtils.getMessage("objection")+"</span></button>");var v=RegExp(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi),u=RegExp(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi),g="ar"===DictionaryUtils.getLanguage()?e[0].rejectionStatements.descriptionAr:e[0].rejectionStatements.descriptionEn,f=g.match(v),m=g.match(u),D=g;if(f)for(p=0;p<f.length;p++)D=D.replace(f[p],"<a href="+f[p]+" target='_blank'>"+f[p]+"</a>");if(m)for(p=0;p<m.length;p++)D=D.replace(m[p],"<a href=mailto:"+m[p]+" target='_blank'>"+m[p]+"</a>")}$(".ObjectionDetailsBtn").click((function(){this.disabled=!0,$(".popupDetailsBody").append('<div class="objection"></div>'),$(".objection").append('<div class="row"><div class="col-12"><div class="alert alert-danger mb-1"><div class="row"></div></div></div></div>'),$(".popupDetailsBody .objection .alert .row").append('<div class="col-12 col-print-4"><div class="detailsGroup" showInShare="No" ><label><span class="font-weight-bold">'+DictionaryUtils.getMessage("objection_process")+'</span></label><div class="detailsValueObjection">'+D+"</div></div></div>")})),$(".popupDetails .BtnToolbar").append('<button type="button" class="btn btn-success PrintDetailsBtn" divtoprint="DivDetailsToPrint" header="'+DictionaryUtils.getMessage("violation_details")+'"><i class="fad fa-print"></i> <span>'+DictionaryUtils.getMessage("print")+"</span></button>"),PrintDetails(),$(".popupDetails .BtnToolbar").append('<button type="button" class="btn btn-success ShareDetailsBtn BtnSmall" ShareType="Email" divtoprint="DivDetailsToPrint" header="'+i+'"><i class="fad fa-envelope-open"></i></span></button>'),$(".popupDetails .BtnToolbar").append('<button type="button" class="btn btn-success ShareDetailsBtn BtnSmall" ShareType="WhatsApp" divtoprint="DivDetailsToPrint" header="'+i+'"><i class="fab fa-whatsapp"></i></span></button>'),Share(),$(".popupDetails").after('<div class="alert  text-center CheckPayment PopupLoading"><div class="se-pre-con Small"></div><span class="CheckPaymentTXT">'+DictionaryUtils.getMessage("please_wait")+"</span></div>")})).always((function(a){})).fail((function(){$(".CustomModalBodyCard .LoadingBeforeSendSpan").remove(),1==FromHome&&$(".CustomModalBodyCard").html('<div class="alert alert-warning text-center" role="alert">'+DictionaryUtils.getMessage("violation_notfound")+"</div >"),$(".ViolationDetails").html('<div class="alert alert-warning text-center" role="alert">'+DictionaryUtils.getMessage("violation_notfound")+"</div >"),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:"add-efaa",data:formData,success:function(a){},error:function(a,e,i){console.error(a.responseText)}})}))};function PrintDetails(){if($("body").hasClass("rtlDesign"))var a="PrintAr.css";else a="PrintEn.css";$(".PrintDetailsBtn").click((function(){var e;e=1==$("body").hasClass("ltrDesign")?"ltrDesign":"rtlDesign";var i=$(this).attr("DivToPrint"),s=DictionaryUtils.getMessage("nationalviolationsplatform")+"("+DictionaryUtils.getMessage("efaa")+")",t=$(this).attr("header");$("."+i).printThis({importCSS:!0,pageTitle:"",loadCSS:["/Custom/css/Print.css","/Custom/css/"+a],header:'<div class="row Header mb-3 '+e+'"><div class="col-8 HeaderTxt"><h2 class="pt-1 pb-0 mb-0">'+s+'</h2><h4 class="pt-0 pb-0 mb-0">'+t+'</h4><h6 class="pt-0">'+DictionaryUtils.GetDate()+'</h6></div><div class="col-4 HeaderImg pt-2"><img src="../new/EFAA.svg" /></div><hr></div>',footer:'<div class="row Header mb-3 '+e+'"><div class="col-8 HeaderTxt"></div><div class="col-4 HeaderImg pt-2"><img src="../new/NICB.svg" /></div><hr></div>'})}))}function Share(){$(".ShareDetailsBtn").click((function(){var a=$(this).attr("DivToPrint"),e=$(this).attr("ShareType"),i="";"Email"==e?(i+=DictionaryUtils.getMessage("nationalviolationsplatform")+" ("+DictionaryUtils.getMessage("efaa")+")\n",i+=DictionaryUtils.getMessage("violation_details")+"\n\n"):"WhatsApp"==e&&(i+="*"+DictionaryUtils.getMessage("nationalviolationsplatform")+" ("+DictionaryUtils.getMessage("efaa")+")*\n",i+="*"+DictionaryUtils.getMessage("violation_details")+"*\n"),$("."+a+" .popupDetailsHeader").find(".detailsGroup").each((function(){if("Yes"==$(this).attr("showInShare")){var a=$(this).find("label span").html(),e=$(this).find(".detailsValue").text();i+=a+": "+e+"\n"}})),i+="\n"+DictionaryUtils.getMessage("more_info")+" https://efaa.com";var s=DictionaryUtils.getMessage("nationalviolationsplatform");"Email"==e?window.location="mailto:?Content-type=text/html&subject="+s+"&body="+encodeURIComponent(i):"WhatsApp"==e&&(window.location="https://wa.me/?text="+encodeURIComponent(i))}))}